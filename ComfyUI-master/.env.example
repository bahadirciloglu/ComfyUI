# RunPod Configuration
RUNPOD_API_KEY=your_runpod_api_key_here
COMFYUI_ENDPOINT_ID=your_endpoint_id_here

# Model Repository APIs
CIVITAI_API_KEY=your_civitai_api_key_here
HUGGINGFACE_USERNAME=your_huggingface_username_here
HUGGINGFACE_PASSWORD=your_huggingface_password_here

# New API Services (from latest ComfyUI update)
# Minimax API
MINIMAX_API_KEY=your_minimax_api_key_here
MINIMAX_GROUP_ID=your_minimax_group_id_here

# ByteDance API
BYTEDANCE_API_KEY=your_bytedance_api_key_here

# Ideogram API
IDEOGRAM_API_KEY=your_ideogram_api_key_here

# Kling API
KLING_API_KEY=your_kling_api_key_here

# Luma API
LUMA_API_KEY=your_luma_api_key_here

# OpenAI API
OPENAI_API_KEY=your_openai_api_key_here

# Pixverse API
PIXVERSE_API_KEY=your_pixverse_api_key_here

# Recraft API
RECRAFT_API_KEY=your_recraft_api_key_here

# Runway API
RUNWAY_API_KEY=your_runway_api_key_here

# Vidu API
VIDU_API_KEY=your_vidu_api_key_here

# RunPod GPU Performance Settings
# Optimized for high-end GPUs (RTX 4090, A100, H100)
COMFYUI_FAST_MODE=true
COMFYUI_FP16_ACCUMULATION=true
COMFYUI_FP8_OPTIMIZATIONS=true
COMFYUI_PINNED_MEMORY=true
COMFYUI_CUBLAS_OPS=true
COMFYUI_AUTOTUNE=true

# Cache Settings - Serverless Optimized
COMFYUI_CACHE_TYPE=none  # No cache for serverless (fresh start each time)
COMFYUI_CACHE_LRU_SIZE=0  # Disable LRU cache for serverless
COMFYUI_CACHE_RAM_THRESHOLD=2.0  # Lower threshold for quick startup

# Memory Management - Serverless Optimized
COMFYUI_VRAM_MANAGEMENT=auto  # Auto management for variable workloads
COMFYUI_ASYNC_OFFLOAD=false  # Disable for faster response times
COMFYUI_NUM_STREAMS=2  # Fewer streams for faster startup

# Model Loading - GPU Optimized
COMFYUI_DISABLE_XFORMERS=false  # Keep xformers for GPU acceleration
COMFYUI_USE_SPLIT_CROSS_ATTENTION=false  # Not needed with good GPU
COMFYUI_ATTENTION_IMPLEMENTATION=xformers  # Force xformers for GPU
COMFYUI_USE_SAGE_ATTENTION=true  # New sage attention for better performance

# Quantization Settings - GPU Optimized
COMFYUI_MIXED_PRECISION=true
COMFYUI_SCALED_FP8=true
COMFYUI_FORCE_FP16=true  # Force FP16 for GPU speed

# GPU Specific Settings
CUDA_VISIBLE_DEVICES=0  # Use first GPU
PYTORCH_CUDA_ALLOC_CONF=max_split_size_mb:512,expandable_segments:True
COMFYUI_FORCE_CUDA=true

# Development and Debug
COMFYUI_VERBOSE=false
COMFYUI_DEBUG_MODE=false
COMFYUI_LOG_LEVEL=INFO

# RunPod Serverless Worker Settings
RUNPOD_WORKER_ID=${RUNPOD_WORKER_ID}
RUNPOD_JOB_ID=${RUNPOD_JOB_ID}
RUNPOD_REQUEST_ID=${RUNPOD_REQUEST_ID}

# Serverless Worker Performance
COMFYUI_LISTEN=0.0.0.0
COMFYUI_PORT=8000  # Standard serverless port
COMFYUI_ENABLE_CORS_HEADER=*
COMFYUI_SERVERLESS_MODE=true  # Enable serverless optimizations

# GPU Memory Optimization for RunPod
COMFYUI_NORMALVAE_TILED=true  # Use tiled VAE for memory efficiency
COMFYUI_DISABLE_SMART_MEMORY=false  # Keep smart memory management
COMFYUI_FORCE_UPCAST_ATTENTION=false  # Don't upcast on good GPUs

# Model Storage Paths (Serverless optimized)
COMFYUI_MODEL_PATH=/runpod-volume/models  # Network storage for serverless
COMFYUI_OUTPUT_PATH=/tmp/outputs  # Temporary output for serverless
COMFYUI_INPUT_PATH=/tmp/inputs  # Temporary input for serverless
COMFYUI_TEMP_PATH=/tmp/comfyui

# Serverless Processing Optimization
COMFYUI_BATCH_SIZE=1  # Single request processing for serverless
COMFYUI_MAX_BATCH_AREA=2097152  # 1024x1024 max area for faster processing
COMFYUI_TIMEOUT=300  # 5 minute timeout for serverless jobs

# Serverless Network Settings
COMFYUI_EXTRA_MODEL_PATHS_CONFIG=/runpod-volume/extra_model_paths.yaml
COMFYUI_AUTO_LAUNCH_BROWSER=false
COMFYUI_DISABLE_METADATA=false  # Keep metadata for debugging
COMFYUI_PREVIEW_METHOD=auto  # Auto preview method

# RunPod Serverless Specific Settings
RUNPOD_SERVERLESS=true
RUNPOD_WEBHOOK_GET_JOB_URL=${RUNPOD_WEBHOOK_GET_JOB_URL}
RUNPOD_WEBHOOK_POST_OUTPUT_URL=${RUNPOD_WEBHOOK_POST_OUTPUT_URL}

# Worker Startup Optimization
COMFYUI_PRELOAD_MODELS=true  # Preload common models for faster startup
COMFYUI_WARMUP_ENABLED=true  # Enable warmup requests
COMFYUI_STARTUP_TIMEOUT=120  # 2 minute startup timeout

# Request Handling
COMFYUI_MAX_CONCURRENT_REQUESTS=1  # Single request at a time for serverless
COMFYUI_REQUEST_TIMEOUT=300  # 5 minute request timeout
COMFYUI_CLEANUP_AFTER_REQUEST=true  # Clean up after each request

# Model Management for Serverless
COMFYUI_MODEL_CACHE_SIZE=2  # Cache only 2 models max
COMFYUI_UNLOAD_MODELS_AFTER_USE=true  # Unload models to free VRAM
COMFYUI_MODEL_DOWNLOAD_TIMEOUT=600  # 10 minute model download timeout

# Output Handling
COMFYUI_COMPRESS_OUTPUT=true  # Compress outputs for faster upload
COMFYUI_OUTPUT_FORMAT=png  # Default output format
COMFYUI_CLEANUP_TEMP_FILES=true  # Clean temp files after request

# Logging for Serverless
COMFYUI_LOG_REQUESTS=true  # Log all requests for debugging
COMFYUI_LOG_PERFORMANCE=true  # Log performance metrics
COMFYUI_STRUCTURED_LOGGING=true  # Use structured logging format